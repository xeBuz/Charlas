<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Crafty - Programación de Videojuegos en HTML5</title>
    <meta name="viewport" content="width=1024">

	<link rel="stylesheet" href="css/coderdeck-core.min.css" type="text/css">
	<link rel="stylesheet" id='style-theme-link' href="css/coderdeck.css" type="text/css" >

	<script src='js/jquery.min.js'></script>
	<script src="js/modernizr.js"></script>
  <script src='js/crafty.js'></script>

</head>
<body class="deck-container">


<script type='text/coderdeck' id='coderdeck-default'>
  <html>
    <head>
      <script src='js/jquery.min.js'>SCRIPTEND
      <script src='js/crafty.js'>SCRIPTEND
    </head>
    <body>
    <script>
      CODE
    SCRIPTEND
    </body>
</html>
</script>



<script type='text/coderdeck' id='crafty-template'>
  <html>
    <head>
      <script src='js/jquery.min.js'>SCRIPTEND
      <script src='js/crafty.js'>SCRIPTEND
    </head>
    <body>
    <script>
      $(document).ready(function() {

        Crafty.init(640,480).canvas.init();
        Crafty.background("black");

        CODE
      });
    SCRIPTEND
    </body>
</html>
</script>


<script type='text/coderdeck' id='crafty-separate-template'>
  <html>
    <head>
      <script src='js/jquery.min.js'>SCRIPTEND
      <script src='js/crafty.js'>SCRIPTEND
    </head>
    <body>
    <script>
      $(document).ready(function() {

        Crafty.init(640,480).canvas.init();
        Crafty.background("black");

        startGame();
    });
    SCRIPTEND

    CODE

    </body>
</html>
</script>




<article class='slide slide-subhead'>
    <h1>Crafty</h1>
    <br>    
    <h2>Introducción a la programación de videojuegos.</h2>
    <h2>Engine Open-Source orientado al desarrollo en HTML5.</h2>
    <br>
    <!--<img src="img/logo.png" alt="Crafty Logo"/>-->
    <br><br><br><br>
    <h2><a href="http://blog.jesusroldan.com">Jesús Roldán</a> - <a href="http://twitter.com/xebuz">@xeBuz</a></h2>

</article>


<article class='slide slide-list'>
<h2>La charla contendrá...</h2>
<ul>
<li class="slide">
  <h3>Una breve introducción al desarrollo de videojuegos.</h3>
</li>
<li class="slide">
  <h3>Vamos a aprender a usar un framework llamado Crafty.</h3>
</li>
<li class="slide">
  <h3>Ejemplos de código</h3><h4> (si, hay código, pero no es difícil)</h4>
</li>
<li class="slide">
  <h3>Imágenes idiotas</h3>
  <img src="img/supermeatboy.png" alt="Super Meat Boy"/>
</li>
</ul>
</article>



<article class='slide slide-list'>
<h2>¿Por qué desarrollar videojuegos?</h2>
<ul>
<li class="slide">
  <h3>Es un mercado creciente que factura mucha plata.</h3>
</li>
<li class="slide">
  <h3>Como proyecto propio puede (y debe) ser muy divertido.</h3>
</li>
<li class="slide">
  <h3>Como proyecto grupal también, hay mucha gente interesada, y se necesitan de diferentes skills para lograr algo bien.</h3>
</li>
<li class="slide">
  <h3>Because reasons...</h3>
</li>
<li class="slide">
  <img src="img/tentacle.jpg" alt="Day of the tentacle"/>
</li>
</ul>
</article>

<article class='slide slide-list'>
<h2>¿Por qué web?</h2>
<ul>
<li class="slide">
  <h3>Todos tiene un navegador.</h3>
</li>
<li class="slide">
  <h3>No requiere instalación.</h3>
</li>
<li class="slide">
  <h3>Tiene una llegada fácil al casual gamer.</h3>
</li>
<li class="slide">
  <img src="img/tails.gif" alt="Tails"/>
</li>
</ul>
</article>

<article class='slide slide-list'>
<h2>Y bien...¿Por qué HTML5?</h2>
<ol>
<li class="slide"><h3>¡NO ES FLASH!</h3></li>
<li class="slide"><h3>GO TO 1</h3>
<img align="right" src="img/guybrush.png" alt="Monkey Island"/>
</li>
</ol>
</article>

<article class='slide slide-list'>
<h2>Y bien...¿Por qué HTML5? II</h2>
<ul>
<li class="slide">
  <h3>Es (o debería serlo) un estándar para todos los navegadores y sistemas operativos.</h3>
</li>
<li class="slide">
  <h3>No requiere plugins ni sandeces de ese tipo.</h3>
</li>
<li class="slide">
  <h3>Hoy por hoy, no requiere demasiados conocimientos previos.</h3>
</li>
<li class="slide">
  <h3>Existen muchos frameworks (eso es tanto bueno como malo).</h3>
</li>
<li class="slide">
  <img src="img/earthwormjim.jpg" alt="Earth Worm Jim"/>
</li>
</ul>
</article>

<article class='slide slide-list'>
<h2>Usemos un framework: Crafty</h2>
<ul>
  <li class="slide">
  <h3>Es sencillo de aprender, la documentación "está bien".</h3>
</li>
<li class="slide">
  <h3>Es OpenSource y funciona en todos los navegadores <i>modernos</i>.</h3>
</li>
<li class="slide">
  <h3>Permite utilizar Canvas o DOM.</h3>
</li>
<li class="slide">
  <h3>Soporta Sprites.</h3>
</li>
<li class="slide">
  <h3>Es muy liviano.</h3>
</li>
<li class="slide">
  <h3>Utiliza un "Entity-Component System".</h3>
</li>
<li class="slide">
  <h3>Gestiona las colisiones.</h3>
</li>
<li class="slide">
  <h3>Maneja eventos.</h3>
</li>
</ul>
</article>

<article class='slide slide-list'>
<h2>El esqueleto básico del HTML</h2>
<h4>
<pre class='prettyprint'>
&lt;!DOCTYPE html&gt; 
&lt;html&gt; 
    &lt;head&gt; 
        &lt;title&gt;Final Fantasy XXVII&lt;/title&gt;
        &lt;script src="crafty.js" type="text/javascript"&gt;&lt;/script&gt; 
        &lt;script src="main.js" type="text/javascript"&gt;&lt;/script&gt; 
    &lt;/head&gt; 
    &lt;body&gt; 
    &lt;/body&gt; 
&lt;/html&gt;
</pre>
</h4>
<img src="img/manny.jpg" alt="Manny Calavera"/> 
</article>


<article class='slide slide-list'>
<h2>El esqueleto básico de Crafty</h2>
<h4> 
<pre class='prettyprint'>
// Cuando carga ejecuta todo esto
$(document).ready(function() {

  // Inicializa el espacio donde trabaja Crafty
  // Le damos el largo y alto
  Crafty.init(640, 480);

  // Inicializamos el Canvas
  Crafty.canvas.init();  
});
</pre>
</h4> 
</article>

<article class='slide slide-list'>
<h2>Trabajando con elementos</h2>
<h4>
  <img src="img/worms.jpg" alt="Worms"/>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {

  // De nuevo, definimos el canvas en donde trabajar
  Crafty.init(640,480);
  Crafty.canvas.init();

  // Creamos una variable (elemento) con 3 componentes
  // "Canvas" me permite dibujar en la pantalla y "2D" establecer la ubicación
  // "Color" le da ... color
  var cuadrado = Crafty.e("2D, Canvas, Color"); 
  cuadrado.attr({w:50, h:50});
});
</textarea>
</h4>
</article>


<article class='slide slide-list'>
<h2>Se puede escribir de varias formas</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {

  //En una sola línea podemos poner varias cosas, simplifica la lectura
  Crafty.init(640,640).canvas.init();

  //En varias líneas, con identado
  var cuadrado = Crafty.e("2D, Canvas, Color")
                       .attr({y:20, x:20, w:50, h:50}) 
                       .color("blue")

  //Se pueden agregar componentes en cualquier momento
  cuadrado.addComponent("Draggable").dragDirection();

  //También se pueden quitar componentes
  //cuadrado.removeComponent("Draggable");

  //Y modificar las propiedades
  //cuadrado.dragDirection({x:1, y:0})
});
</textarea>
</h4>
</article>


<article class='slide slide-list'>
<h2>Un poco más interactivo</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {
  Crafty.init(1000,500).canvas.init();
  Crafty.background("black");

  var cuadrado = Crafty.e("2D, Canvas, Color")
                       .attr({y:100, x:100, w:25, h:25}) 
                       .color("#FCDF00");

  // Este componente me permite manejar a través del teclado
  // Usa las flechas y el WASD por igual 
  cuadrado.addComponent("Fourway").fourway(3);

  //cuadrado.addComponent("Multiway").multiway(4,{ 
  //        UP_ARROW: -90, DOWN_ARROW: 90, 
  //        RIGHT_ARROW: 0, LEFT_ARROW: 180});
});
</textarea>
</h4>
</article>

<article class='slide slide-list'>
<h2>Colisiones y un poco de física</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {
  Crafty.init(1000,500).canvas.init();
  
  var suelo = Crafty.e("2D, Canvas, Color, Collision, Suelo")
                     .attr({y:400, x:0, w:600, h:25}) 
                     .color("black");

  var cuadrado = Crafty.e("2D, Canvas, Color, Collision, Gravity")
                       .attr({y:0, x:100, w:25, h:25}) 
                       .color("red")
                       .gravity().gravity("Suelo").gravityConst(0.1);
 
});
</textarea>
</h4>
</article>

<!--
<article class='slide slide-list'>
<h2>Sprites y Scenes</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {

  Crafty.scene("Cargar", function() {

    // Load our assets
    Crafty.load(["images/dungeon.png","images/characters.png"], function() {
      // Put in a fake timeout so we can see this in action
      // DONT do this in a real game please
      setTimeout(function() { 
         Crafty.scene("main"); // Play the main scene
      }, 2000);
    });

    // White background and some ugle text
    Crafty.background("#FFF");
    Crafty.e("2D, DOM, Text").attr({w: 640, h: 20, x: 0, y: 120})
    .text("Loading")
    .css({"text-align": "center"});
  });
 
  Crafty.scene("Juego",function() {
    alert("Awesome Main Scene Playing");
  });

  Crafty.scene("Cargar");
 
});
</textarea>
</h4>
</article>
-->


<article class='slide slide-list'>
<h2>Creación de Componentes</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {

  Crafty.init(1000,500).canvas.init();

  //Creamos el componente Player
  Crafty.c("Player",{
    init: function(){
      this.attr({x: 100, 
                 y: 100,
                 w: 25,
                 h: 25})    
      this.requires("Canvas, Collision, Solid, Color").color("black");
    }
  });
  
  // "Instanciamos" a Player
  var player = Crafty.e("2D, Player");
});
</textarea>
</h4>
</article>


<article class='slide slide-list'>
<h2>Completemos un poco el Player</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {
  var WIDTH = 1000
  var HEIGHT = 500

  Crafty.init(WIDTH, HEIGHT, 30);

  Crafty.c("Player",{
    size : 20,
    posX : (WIDTH / 2),
    posY : (HEIGHT / 2),

    init: function(){
      // Esto no tiene nada nuevo
      this.attr({x: this.posX, 
                 y: this.posY,
                 w: this.size,
                 h: this.size})  
      this.requires("DOM, Collision, Solid, Color").color("black");
      this.requires("Multiway").multiway({x:1.5,y:1.5}, 
                            {UP_ARROW: -90, DOWN_ARROW: 90, RIGHT_ARROW: 0, LEFT_ARROW: 180, 
                             W: -90, S: 90, D: 0, A: 180});
      
      // Podemos trabajar con CSS
      this.css("-webkit-border-radius", "5px");
      this.css("-moz-border-radius", "5px");
      this.css("border-radius", "5px"); 
      this.css("border-style", "solid");  
      this.css("border-width", "1px");  
      this.css("border-color", "000000"); 
    }
  });

  var player = Crafty.e("2D, Player");

});
</textarea>
</h4>
</article>


<article class='slide slide-list'>
<h2>...y los enemigos...</h2>
<h4>
<textarea class='coder-editor coder-editor-full'  data-language='javascript'>
$(document).ready(function() {
  var WIDTH = 1000
  var HEIGHT = 500

  Crafty.init(WIDTH, HEIGHT, 30);

  Crafty.c("Zombie",{
    size : 20,

    init: function(){   
      this.attr({x: Math.floor(Math.random() * HEIGHT), 
                 y: Math.floor(Math.random() * WIDTH),
                 w: this.size,
                 h: this.size})    
      this.requires("DOM, Collision, Solid, Color").color("Red");
      
      // Con esto hacemos referencia al player
      var player = Crafty("Player");

      // Eventos, EnterFrame quiere decir que se ejecuta en cada frame
      this.bind("EnterFrame", function () {
        player = Crafty(player[0]);

        if (this.x < player.x)
          this.x++;
        else
          this.x--;

        if (this.y < player.y)
          this.y++;
        else
          this.y--;

        // Si un zombie toca a otro, digamos que muere, porque sí...
        // this.hit pertenece al componente Collision, lo maneja todo solo  
        if(this.hit('Zombie')) {
              this.destroy();
         }

      })
    }
  });

  // Esta función, con el timeout, crea un nuevo elemento cada 1000 ms
  function createZombies(){
    (function(){
        // Genera un nuevo zombie, y como el init del componente establece que
        // la posicion X e Y son aleatorias, aparece en cualquier lado de la pantalla        
        var zombie = Crafty.e("2D, Zombie");
                  setTimeout(arguments.callee, 1000);
    })();
  };

  Crafty.c("Player",{
    size : 20,
    posX : (WIDTH / 2),
    posY : (HEIGHT / 2),

    init: function(){
      this.attr({x: this.posX, 
                 y: this.posY,
                 w: this.size,
                 h: this.size})  
      this.requires("DOM, Collision, Solid, Color").color("black");
      this.requires("Multiway").multiway({x:1.5,y:1.5}, 
                            {UP_ARROW: -90, DOWN_ARROW: 90, RIGHT_ARROW: 0, LEFT_ARROW: 180, 
                             W: -90, S: 90, D: 0, A: 180});
      
      this.css("-webkit-border-radius", "5px");
      this.css("-moz-border-radius", "5px");
      this.css("border-radius", "5px"); 
      this.css("border-style", "solid");  
      this.css("border-width", "1px");  
      this.css("border-color", "000000"); 

      // Eventos, de nuevo, s
      this.bind("EnterFrame", function () {
        
        if(this.hit('Zombie')) {
            alert("GAME OVER");
              this.destroy();
         }
      })
    }
  });

  // Crea el Player
  var player = Crafty.e("2D, Player");

  // Llamamos a la función que genera los enemigos
  createZombies(); 
  
});
</textarea>
</h4>
</article>


<article class='slide slide-list'>
<h2>Algunos detalles más</h2>
<ul>
<li class="slide">
  <h3>En lugar de codificar todo de cero, puede usar CraftyBoilerplate.</h3>
</li>
<li class="slide">
  <h3>Se pueden usar componentes de terceros, desde craftycomponents.com/</h3>
</li>
<li class="slide">
  <h3>Ante la duda, miren el código fuente..</h3>
</li>
<li class="slide">
  <h3>Si algo no les anda, es opensource, no puteen, arreglenlo.</h3>
</li>
<li class="slide">
  <img src="img/kirby.jpg" alt="Kirby"/>
</li>
</ul>
</article>



<article class='slide slide-list'>
<h2>No escuchen a Zoidberg</h2>
 
<ul>
<li class="slide">
  <img src="img/zoidberg.jpg" alt="Your code sucks"/>
</li>
<li class="slide">
  <h3>Sientense a programar, no importa si su juego apesta. Es muy posible que fallen horriblemente muchas veces antes de hacer algo que quede bueno, pero si no lo intenan nunca lo van a lograr</h3>
</li>
</ul>
</article>


<article class='slide slide-list'>
<h2>...y eso fue todo...</h2>
  <img src="img/unicode.png" alt="UNI-CODE"/>
</article>



<script src='js/coderdeck.min.js'></script>
<script>
	$(function() {
		$.deck('.slide');
	});
</script>
</body>
</html>
